{% set message = message|default('Loading...') %}
{% set size = size|default('medium') %}
{% set type = type|default('spinner') %}
{% set color = color|default('accent') %}
{% set class = class|default('') %}
{% set id = id|default('loading-' ~ range(1000, 9999) | random) %}

{% if size == 'small' %}
  {% set size_class = 'h-4 w-4' %}
{% elif size == 'large' %}
  {% set size_class = 'h-8 w-8' %}
{% else %}
  {% set size_class = 'h-5 w-5' %}
{% endif %}

{% if color == 'accent' %}
  {% set color_class = 'text-accent-dark' %}
{% elif color == 'white' %}
  {% set color_class = 'text-white' %}
{% elif color == 'gray' %}
  {% set color_class = 'text-gray-600 dark:text-gray-300' %}
{% elif color == 'blue' %}
  {% set color_class = 'text-blue-600 dark:text-blue-400' %}
{% else %}
  {% set color_class = 'text-accent-dark' %}
{% endif %}

<div id="{{ id }}" class="inline-flex items-center {{ class }}">
  {% if type == 'dots' %}
    <div class="flex space-x-1">
      <span class="block w-3 h-3 {{ color_class }} opacity-100 rounded-full animate-bounce"></span>
      <span class="block w-3 h-3 {{ color_class }} opacity-75 rounded-full animate-bounce" style="animation-delay: 0.1s"></span>
      <span class="block w-3 h-3 {{ color_class }} opacity-50 rounded-full animate-bounce" style="animation-delay: 0.2s"></span>
    </div>
  {% elif type == 'pulse' %}
    <div class="animate-pulse {{ size_class }} {{ color_class }}">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
      </svg>
    </div>
  {% else %}
    <svg class="animate-spin {{ size_class }} {{ color_class }}" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>
  {% endif %}
  
  {% if message %}
    <span class="ml-2 {{ text_class|default(color_class) }}">{{ message }}</span>
  {% endif %}
</div>