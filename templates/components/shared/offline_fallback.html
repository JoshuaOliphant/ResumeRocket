{% set fallback_content = fallback_content|default('') %}
{% set retry_url = retry_url|default('') %}
{% set retry_text = retry_text|default('Try Again') %}
{% set offline_id = offline_id|default('offline-' ~ range(1000, 9999) | random) %}

<div id="{{ offline_id }}" 
     x-data="{ isOnline: navigator.onLine }"
     x-init="
        window.addEventListener('online', () => { isOnline = true });
        window.addEventListener('offline', () => { isOnline = false });
     "
     x-show="!isOnline"
     class="bg-gray-50 dark:bg-gray-900/40 border-l-4 border-gray-500 p-4 rounded-md mb-4">
    <div class="flex">
        <div class="flex-shrink-0">
            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" />
            </svg>
        </div>
        <div class="ml-3">
            <h5 class="text-lg font-medium text-gray-800 dark:text-gray-200">You're Offline</h5>
            <p class="text-gray-700 dark:text-gray-300 mt-1">
                It looks like you're currently offline. Some features might not be available.
            </p>
            
            {% if fallback_content %}
            <div class="mt-3 overflow-auto max-h-96 bg-white dark:bg-gray-800 p-3 rounded-md border dark:border-gray-700">
                {{ fallback_content|safe }}
            </div>
            {% endif %}
            
            <div class="mt-3 flex flex-wrap gap-2">
                {% if retry_url %}
                <a href="{{ retry_url }}" 
                   class="px-3 py-1 bg-blue-100 dark:bg-blue-800 hover:bg-blue-200 dark:hover:bg-blue-700 text-blue-800 dark:text-blue-100 rounded-md text-sm transition">
                    {{ retry_text }}
                </a>
                {% endif %}
                
                <button @click="window.location.reload()" 
                        class="px-3 py-1 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md text-sm transition">
                    Refresh Page
                </button>
            </div>
        </div>
    </div>
</div>